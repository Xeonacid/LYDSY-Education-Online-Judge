
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel=stylesheet href='include/hoj.css' type='text/css'>
</head>
<body>
<center>
<div style="width:90%; text-align:left">
<img src="image/logo.png"/>
</div>
<table width=96%> 
	<tr align="center" class='hd' valign="top">
				<th><a href="https://www.lydsy.com/JudgeOnline/faqs.php">F.A.Qs</a></th>
		<th><a href="https://www.lydsy.com/JudgeOnline/">Home</a></th>
		<th><a href="https://www.lydsy.com/JudgeOnline/bbs.php">Discuss</a></th>
		<th><a href="https://www.lydsy.com/JudgeOnline/problemset.php">ProblemSet</a></th>
		<th><a href="https://www.lydsy.com/JudgeOnline/status.php">Status</a></th>
		<th><a href="https://www.lydsy.com/JudgeOnline/ranklist.php">Ranklist</a></th>
        <th><a href="https://www.lydsy.com/JudgeOnline/contest.php">Contest</a></th>
        <th><a href="http://begin.lydsy.com/JudgeOnline">入门OJ</a></th>
		<th><a href="https://www.lydsy.com/JudgeOnline/modifypage.php"><b>ModifyUser</b></a>&nbsp;&nbsp;<a href='https://www.lydsy.com/JudgeOnline/userinfo.php?user=Xeonacid'>
				<font color=red>Xeonacid</font></a></th><th><a href="https://www.lydsy.com/JudgeOnline/logout.php">Logout</a></th>		<th><a href="https://www.lydsy.com/JudgeOnline/donation.php"><font color=red>捐赠本站</font></a></th>
	</tr>
</table>
</center>
<center>
<div class="notice">
	<div>
		<B>Notice:</B>注册本OJ方式请见https://www.lydsy.com/JudgeOnline/wttl/thread.php?tid=5671	</div>
</div>
</center>
</div>
<title>Problem 4098. -- [Usaco2015 Open]Palindromic Paths</title><center><h2>4098: [Usaco2015 Open]Palindromic Paths</h2><span class=green>Time Limit: </span>10 Sec&nbsp;&nbsp;<span class=green>Memory Limit: </span>128 MB<br><span class=green>Submit: </span>157&nbsp;&nbsp;<span class=green>Solved: </span>116<br>[<a href='https://www.lydsy.com/JudgeOnline/submitpage.php?id=4098'>Submit</a>][<a href='https://www.lydsy.com/JudgeOnline/problemstatus.php?id=4098'>Status</a>][<a href='https://www.lydsy.com/JudgeOnline/bbs.php?id=4098'>Discuss</a>]</center><h2>Description</h2><div class=content><div>Farmer John's farm is in the shape of an N&times;N grid of fields (1&le;N&le;500), each labeled with a letter in the alphabet. For example:</div>
<div>ABCD</div>
<div>BXZX</div>
<div>CDXB</div>
<div>WCBA</div>
<div>Each day, Bessie the cow walks from the upper-left field to the lower-right field, each step taking her either one field to the right or one field downward. Bessie keeps track of the string that she generates during this process, built from the letters she walks across. She gets very disoriented, however, if this string is a palindrome (reading the same forward as backward), since she gets confused about which direction she had walked.</div>
<div></div>
<div>Please help Bessie determine the number of distinct routes she can take that correspond to palindromes. Different ways of obtaining the same palindrome count multiple times. Please print your answer modulo 1,000,000,007.</div>
<div>从n&times;n 的矩阵 左上角走到右下角会有一个长度 n+n+1的字符串，问有多少种走法使得路径字符串为回文？</div>
<div></div>
<p></p></div><h2>Input</h2><div class=content><div>The first line of input contains N, and the remaining N lines contain the N rows of the grid of fields. Each row contains N characters that are in the range A..Z.</div>
<div></div>
<p></p></div><h2>Output</h2><div class=content><div>Please output the number of distinct palindromic routes Bessie can take, modulo 1,000,000,007.</div>
<div></div>
<p></p></div><h2>Sample Input</h2>
			<div class=content><span class=sampledata>4<br />
ABCD<br />
BXZX<br />
CDXB<br />
WCBA</span></div><h2>Sample Output</h2>
			<div class=content><span class=sampledata>12<br />
Bessie can make the following palindromes<br />
1 x "ABCDCBA"<br />
1 x "ABCWCBA"<br />
6 x "ABXZXBA"<br />
4 x "ABXDXBA"</span></div><h2>HINT</h2>
			<div class=content><p></p></div><h2>Source</h2>
			<div class=content><p><a href='https://www.lydsy.com/JudgeOnline/problemset.php?search=Gold'>Gold</a></p></div><center>[<a href='https://www.lydsy.com/JudgeOnline/submitpage.php?id=4098'>Submit</a>][<a href='https://www.lydsy.com/JudgeOnline/problemstatus.php?id=4098'>Status</a>][<a href='https://www.lydsy.com/JudgeOnline/bbs.php?id=4098'>Discuss</a>]</center>﻿<br>
<a href="https://www.lydsy.com/JudgeOnline/"><span class=red>HOME</span></a>
<a href="javascript:history.go(-1)"><span class=red>Back</span></a>

<hr>
<center>
	<div class="footer">
			<a href="https://www.lydsy.com/JudgeOnline/setlang.php?lang=ko">한국어</a>&nbsp;
		<a href="https://www.lydsy.com/JudgeOnline/setlang.php?lang=cn">中文</a>&nbsp;
		<a href="https://www.lydsy.com/JudgeOnline/setlang.php?lang=fa">فارسی</a>&nbsp;
		<a href="https://www.lydsy.com/JudgeOnline/setlang.php?lang=en">English</a>&nbsp;
		<a href="https://www.lydsy.com/JudgeOnline/setlang.php?lang=th">ไทย</a>
	<br>		<div>版权所有 &copy;2008-2018 大视野在线测评</div>
		<div>Based on opensource project <a href="http://hustoj.googlecode.com">hustoj</a>.</div>
	</div>
</center>
</body>
</html>
